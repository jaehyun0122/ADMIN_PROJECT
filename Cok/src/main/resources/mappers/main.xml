<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.cok.dao.ContentServiceDao">

    <select id="getGnbList" resultType="GnbDto">
        select title, url
        from gnb
    </select>

    <select id="getServiceList" resultType="ServiceDto">
        select *
        from service
    </select>

    <select id="getSubContentItem" resultType="SubContentDto">
        select i.subject as subject, i.content as content
        from service s join service_stock_item i on s.id = i.serviceId
        where i.id = s.id
    </select>

    <select id="getSubContentInvest" resultType="SubContentDto">
        select i.subject as subject, i.content as content
        from service s join service_stock_invest i on s.id = i.serviceId
        where i.id = s.id
    </select>

    <select id="getSubContentStock" resultType="SubContentDto">
        select i.subject as subject, i.content as content
        from service s join service_stock_recommend i on s.id = i.serviceId
        where i.id = s.id
    </select>

    <!-- 증권 추천 -->

    <select id="getStockHeadList" resultType="string">
        SELECT subject FROM service_stock_item
        UNION
        SELECT subject FROM service_stock_invest
        UNION
        SELECT subject FROM service_stock_recommend
    </select>

    <select id="getBannerList" resultType="BannerDto">
        select * from service_stock_banner
    </select>

    <select id="getForeignBuyTop" resultType="ItemDto">
        select title, sum(fp) as fp, sum(lp) as lp, '기관 외국인 매수 상위' as subject
        from service_stock_item
        group by title
        order by fp desc
    </select>

    <select id="getInvestList" resultType="InvestDto">
        select title, sum(rate) as sum, '로보AI 포트폴리오' as subject
        from service_stock_invest
        group by title
        order by sum desc
    </select>

    <!-- 증권 추천 -->

</mapper>